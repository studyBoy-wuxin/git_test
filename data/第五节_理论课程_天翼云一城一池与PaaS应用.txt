天翼云一城一池与PaaS应用开发小组成员：段俊、张坤、王学慧、李永生2培训对象和目标现状问题从事天翼云的云网工程师、交付工程师、解决方案经理等

1、一城一池主要有哪些类型？典型架构如何？

2、自研PaaS有哪些？

3、一城一池（IaaS）和PaaS如何服务于客户IT上云

1、自研一城一池（45min）

2、合营一城一池（45min）

3、PaaS组件概述（100min）

4、PaaS在内外部IT上云的应用（30min）33目录

1.天翼云自研一城一池

2.天翼云合营一城一池

3.天翼云PaaS组件概述

4.天翼云PaaS在内外部IT上云的应用4中国公有云变革不断，行业巨头加速布局4加快技术进步布局分布式云分布式云|一体化的飞天架构一云多芯|一云多态|一套管理平台分布式云×云原生全面云化和全栈智能的最佳架构以分布式云统一架构、统一技术路线加快生态升级构建核心能力微信小程序+生态投资腾讯云接近50%收入由伙伴及投资系企业贡献发布钉钉宜搭

3.0版本3个月，钉钉低代码应用增长38万开发者社区+投资驱动30+场开发者大会|3万+开发者参与加快组织下沉攻坚政企市场16区域组织+18行业组织3000+作战人员新增区域业务部支撑区域数字化转型落地属地团队规模化聚焦五大行业大代表处：两百人规模•成立煤矿、智慧公路、海中小代表处：百人规模关和港口、智能光伏和数据中心能源五大军团面对市场变化，友商加速调整中国电信要加速推动云改，抢占先机，抢抓机遇数据来源：天翼云MI公开资料整理及调研5三大运营商乘“云”而上中国电信重大事件•中国电信在2009年开启“天翼云发展战略”•2012年成立中国电信云计算分公司•2018年全面实施“云改”•2021年3月，“天翼云科技有限公司”独立，实现商业模式的彻底转型，定位为云业务的科技型、平台型公司中国移动重大事件•2007年，中国移动研究院开始云的研发•2014年，中国移动发布公有云平台——移动云•2019年，中国移动实施“云改”战略，将移动云设定为最重要的战略性业务，并把负责云业务的苏州研究院从利润中心调整为成本中心中国联通重大事件•2017年，联通和腾讯、阿里巴巴将相互开放云计算资源，并在云业务层面开展深度合作•2021年，联通云在技术、产品、服务、生态四方面全面升级，塑造“联通云”品牌影响力。2021年云收入•279亿元，同比增长102%2021年云收入•242亿元，同比增长114%2021年云收入•163亿元，同比增长

46.3%科技创新•天翼云实现核心技术突破，全面升级为分布式云，推出ACS、ECX、iStack等边缘云系列产品，加快全栈技术自研。科技创新•发布“大云坤舆”云网一体、“大云融天”云边协同产品能力，打造了一朵架构更新、性能更强、服务更优的分布式云科技创新•推出了操作系统

3.0版本，全面适配主流国产软硬件，支持以统一技术内核多形态交付，提供国产化端到端全栈解决方案。6天翼云在中国云市场中的优势和机会在哪里未来几年云计算增量份额的核心在成本、边缘、政企成本：阿里云营收增长但份额下降势必会继续发生，因为技术门槛敌不过价格竞争，特别是在准备上市的过程中要维持相应的利润率和营收边缘：看好云翼天，云计算成本特别是逐渐边缘化后的成本上，机房和网络都计入边缘计算的服务成本，电信拥有其它云无法比拟的优势政企：中国政企市场的游戏规则和互联网市场完全不同中国云巨头在云市场复制了中国消费互联网高速增长的前半段，但政企市场中国云巨头略显稚嫩，在宏观经济、监管环境发生变化时，掉入总集项目增收不增利的陷阱，都表态要在政企项目中适度往后退，转“总集成角色”为“被集成者”，只提供自己的应该且可以提供的产品和解决方案阿里今年7月提出的生态大会提出合作伙伴优先——zarbot公众号《"流动"基础设施及云计算新范式》7战略定位：一城一池是云公司重要的战略机遇2020年中国IaaS市场份额阿里云,40.6%华为云,

11.1%腾讯云,

11.0%天翼云,

8.7%AWS,

6.0%其他,

22.6%n中国IaaS市场份额，TOP5厂商市场份额从2018年73%提升到2020年77%，已基本形成寡头垄断格局。行业呈现一超多强的态势，阿里云2020年市场份额40.6%，腾讯云、华为云、天翼云紧随其后IaaS市场一超多强形势更加清晰n阿里云、腾讯云、华为云均已完成跨多运营商全球布局，均形成2000+边缘节点能力，提供综合的边缘服务n中国移动构建N+31+X布局，并构建区域战略单元拓展边缘业务n中国电信边缘节点（CDN/ECX）在国内31省，216个城市布局600+节点，主要部署在中国电信网内头部云商纷纷开始向边缘发力n天翼云依托于中国电信31省公司，可充分发挥基础设施、政企客户、渠道资源优势，重点拓展属地和边缘业务，做大做实31+X，决战在边缘。-全网300余个本地网，6000个IDC/DC机房，1万+接入局址-31省2万+客户经理，为客户提供属地服务一城一池是云公司重要战略机遇8中国电信国家云的建设范围国家云安全•具备云内、云外的纵深“关基”安全防护能力•实现云安全、网络安全的高度协同，具备云网安全服务能力DC（一体化大数据中心）•聚焦全国一体化大数据中心枢纽节点起步区•继续开展四大经济发达区域非起步区的数据中心建设•形成“中心集群+浅边缘+深边缘”的层次化IDC/DC网络•以云/DC为中心组网，枢纽集群节点间低时延、大带宽，集群内高效直联•支持算力的智能敏捷调度•接应边缘云布局，全面推进新型城域网建设天翼云•绿色能源、绿色算力、绿色DC、绿色网络、绿色运营总体目标：打造具有“云网融合、安全信创、绿色低碳、生态开放”特色的国家云，“十四五”期间实现“中国第

一、世界一流”国家云建设范围：涵盖天翼云、DC、网络、绿色、安全和AI六个要素绿色•基于自主技术打造分布式云体系，形成2

（2）+4+31+X+O的云、网、IDC资源融合布局，加大算力规模部署，全面支撑和推动国家数字化转型战略AI•构建AI四级算力布局，构建“大数据+AI”的数智中台9天翼云从

1.0到

4.0全面升级成分布式云天翼云

4.0千城万池2021~未来分布式云架构云网融合技术创新全面自研2+4+31+X天翼云

3.02017~2020自研腾飞自研+合作双轮驱动合营为主，自研为辅天翼云

2.02015~2017加大产业合作+自研积累一省一池天翼云

1.02012~2014商用软件采购+自研运营平台蒙贵信息园10与互联网云商比中国电信在边缘云有成本优势“网是基础，云为核心”：借助电信遍布区县的通信机房，边缘云可以把时延做到x毫秒级。通过云网融合，为政企客户提供安全可靠可信的入云环境；为互联网客户提供一张带计算分发能力的网络。个核心机房个地市机房个区县机房综合接入机房11天翼云有全国的2+4+31+X的分布式云本地边缘节点网络边缘节点客户机房区域节点中心节点天翼云，分布式云灾备中心、大数据、AI训练高性能计算业务冷数据、海量存储、超低成本集中化2京津冀长三角粤港澳川陕渝云游戏、云VR等2C/2H集约业务超大规模、全产品、低成本公有云模式区域化4一省一池政务云、医疗云、教育云等2G/2B业务时延敏感型公有云、专属云服务属地化31省节点客户内部ACSistackibox低时延、数据敏感、园区化等2B业务时延特别敏感型边缘服务，客户私有云/混合云服务边缘化XECX内蒙园区贵州园区本地部署敏捷轻量云ACS(AgileCloudService)CDN生长出的边缘云ECX(EdgeCloudX)软硬一体，客户独享的场景化部署容器化部署，视频/AI云原生支持云端统一管理云骨干网云骨干网云骨干网公网专线内网CN2移动网络4G/5G互联网络163/SD-WAN专线网络OTN/PON/CN2CTStackBCS客户定制混合云、裸金属专属云IDC机房专线云资源层次化部署，云基地、大区、省级、边缘及海外节点具备差异化资源服务能力，云主机总量超1000万vCPU，云存储总量超3500PB12天翼云有专为客户现场贴身服务的边缘云互联网客户vCDN实时云渲染5G专网私有云视频一体机工业互联网智慧社区智慧工地物联网老旧摄像头智能改造边缘计算产品适合大带宽、低时延、数据本地化的应用场景。客户群体包括2B方向本地教育、医疗、政务、工业，互联网行业方向直播、游戏平台、元宇宙等。42U全高机柜24U半高机柜2U/4UOTII服务器工业服务器/塔式服务器嵌入式设备arm/x86iStackiBox-IiBox-IIECX一城一池政企客户大型私有云全栈混合云CTSTACK公有云私有云同源同构一致体验稳定性继承私有云13天翼云一城一池-敏捷轻量云ACS-产品概览敏捷轻量云概念：ACS（AgileCloudService）是指采用天翼公有云同源技术架构并轻量化改造、按需提供公有云一致产品能力、可基于公有云管或混合云管进行统一管理的敏捷云服务，是天翼云为一城一池及小型私有云打造的自研轻量化云产品公有云X节点(边缘云)：基于公有云管，标准产品，采用公有云标准定价、公有云结算方式，省公司/地市承诺保底；如浙江、湖北等省。模式一模式二模式三属地行业云(边缘云)：基于混合云管，标准产品+项目定制服务，提供软件、软硬一体两种模式；如湖南、河南、河北、山东等省。小型私有云：基于混合云/私有云管，提供快速交付的小型云，支持超融合部署；如临沂兰山云(3天内集成交付)。省分X节点天翼云公有云-云管省分X节点...本地节点天翼云混合云-云管公有云节点定制内容天翼云混合云/私有云-云管本地节点敏捷交付主要服务场景14专线ECSIMSEVSVPCEIPVFWSEGVPN100+服务2000+应用10000+伙伴灾备网关天翼公有云（CT云）资源混合OOSPPCACS-1计算存储网络/专线ACS-2计算存储网络/专线ACS-3计算存储网络/专线专线专线天翼云一城一池-敏捷轻量云ACS一公有云X节点天翼公有云云管+资源ACS资源池敏捷轻量云ACS资源池作为底层的资源池节点，由天翼公有云云管对ACS进行统一纳管、统一资源管理、统一运维监控、统一账号管理、统一计费结算等服务，提供了与公有云一致的超高安全性可靠性。统一账号管理统一账号统一权限统一入口统一资源管理资源编排弹性伸缩负载迁移统一运维监控资源统计资源性能统一纳管统一平台运维服务云边、边边、边端互通统一计费结算资源用量资源定价资源订单异常报警统一纳管统一资源管理统一运维监控统一账号管理统一计费结算15规划布局：加快一城一池布局，完善云网基础架构按照“一城一池”布局边缘云。按需推进31省本地网全覆盖，并向重点区县/客户园区延伸初期重点以政务、医疗、教育等行业客户为主，提供计算、存储、云电脑、视频处理等核心产品服务。依托CN2-DCI，打造云专网，满足高可靠、高质量、大带宽的云边算力调度需求云边统一纳管，开放标准化能力，满足客户不同业务分层级的部署和迁移要求边缘云（一体化机柜)OTN/IPVPN边缘云（地市/区县)省节点蒙贵/区域节点CN2-DCI中心云定位：提供时延不敏感、规模化的计算和存储服务边缘云定位：提供大带宽、超低时延的本地算力应用，数据本地化应用全国统一的天翼云管理平台OTN企业园区政企楼宇16布局落地：以自研为主落地一城一池n2021年已有安徽、湖南等省进行了一城一池落地实施，云公司自研方案占比较低：•安徽：16个地市，除省节点所在的合肥芜湖外，其余14地市，7地市选择Zstack，6地市选择HCSO，1地市选择华三•湖南：14个地市，除省节点所在的长沙和郴州外，其余12个地市，4地市选择云公司自研，8地市选择Zstack商业综合体工业园区平安城市智慧家庭LeafSpineSpine新型城域网Leaf骨干网IaaS能力通用组件2B应用2C应用2H应用CT应用UPF5GC中心云边缘云云边协同重点场景企业园区政企楼宇n2022年已有大量省公司开始进行基于分布式云架构的一城一池布局n自研方案对标Zstack方案和HCSO方案，并从技术能力、整体报价、交付时间、后续运维等方面取得相对优势，以自研方式为主，落地一城一池17商务模式：一城一池采用私有云模式进行结算公有云一城一池私有云产品能力和网络接入方式产品能力较全：lIaaS\PaaS\SaaS全覆盖l以互联网接入为主，云专线/云专网接入为辅l主要包括云主机、云存储、云电脑、视频云等产品。l以云专线/云专网接入为主，互联网接入为辅l按项目定制建设模式l在2+4部署公有云建设模式l集中建设，规模较大l云公司付机架带宽ip租金l属地一城一池模式；l项目制和预建设模式相结合；l规模适中（一般为数百到数千核）l云公司不付机架带宽ip租金l建设周期3个月左右l按具体项目需求建设l一般规模较小销售价格策略l产品模式定价l用户可按月购买，包年有优惠l销售价格较低l私有云模式结算；l需和省公司客户签订起码一至五年（通常为三年）的云服务合同，需符合云公司财务测算模型指标l按项目制合同定价和付费竞品分析l阿里云、腾讯云、华为云等互联网云服务商。中国电信处于明显劣势l主要竞争对手为移动、联通。中国电信应利用300+本地网资源，把握一地一池先发优势l复杂的项目竞争环境一城一池从云公司视角看是边缘云X节点，以私有云的模式进行建设和结算；从省公司视角看是属地专属云。1818目录

1.天翼云自研一城一池

2.天翼云合营一城一池

3.天翼云PaaS组件概述

4.天翼云PaaS在内外部IT上云的应用19HCSO资源池网络拓扑—一城一池天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE组网方案说明：

1.虚框为根据维护诉求可选区域，专线与SVN两者必选一种；

2.混合墙功能：管理&边界、限速、VPN；Internet接入能力10G（极限15G）。

3.除BMC组网单台部署，其他交换机堆叠部署，防火墙双机主备部署，运维通道SVN双机非主备；

4.HCSO全称为HUAWEICLOUDStackOnline，HCSO以一体化全栈方式交付完整的云服务平台，与合营池统一架构，统一API，满足云化业务敏捷开发、按需弹性以及安全合规的核心诉求。互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线20HCSO资源池网络拓扑—政务云网络节点管理节点混合防火墙天翼云Global运维区InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR存储TOR核心CE8800CE12800CE16800计算节点存储节点BMGW裸机节点高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区IPSecVPN隧道Anti-DDOSIDSNIP...互联网出口区SVN红点表示中接分光器分流器分光器裸机TOR高速平面TOR计算TOR专线网关租户侧waf网络节点管理节点混合防火墙天翼云Global运维区USG6515E网络服务TOR管理服务TORBMC汇聚BMC-TOR存储TOR核心CE8800CE12800CE16800计算节点存储节点BMGW裸机节点高速平面汇聚政务网络管理服务区网络服务区计算POD存储POD裸机PODSVN裸机TOR高速平面TOR计算TOR专线网关互联网区网闸专线接入专线接入IPSecVPN隧道政务外网区21HCSO资源池网络平面网络平面主要描述网段Internet承载公网流量公网IPDMZ承载DMZ区的公共服务，如Console、API10.x.x.x，100.

125.x.x

192.

168.x.xservice管理区各种云服务内部数据通讯流量；运维组件等10.x.x.xstorage管理节点的存储平面，notpodzonestorage

198.x.x.xpublic默认，无vrf，除管理区外的网段100.

64.x.x，100.

125.x.x，10.x.x.x，

192.

168.x.x专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8800CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区IPSecVPN隧道Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE68652*2*10G2*6*10G10G光口或1G电口1G业务&管理存储裸机高速运维管理servicedmzstoragepublicpublicpublicpublicpublicpublicpublicinternet天翼云Global运维区专线22HCSO资源池网络路由规划

（一）天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE方案说明：

1.所有管理网段的网关在核心核心交换机；所有带外管理网的网关在BMC汇聚。

2.核心交换机上通过VRF实现不同平面间隔离。

3.跨VRF的访问需要过防火墙。

4.所有的TOR均为二层设备。

5.核心交换机与BMC汇聚、SVN、路由器建立BGP邻居关系。互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线23HCSO资源池网络路由规划

（二）防火墙AAS3000VPN墙限速墙管理/边界墙核心AS1000BMC汇聚AS2000VPN墙不建立任何BGP邻居该子接口起VRRP，VIP用于Neutron相关组件调用防火墙API，下发业务限速/VPN配置路由器AS500SVNAS3500publicservicedmzinternet发布：默认路由给核心internet平面接收：不控制注意：如果没有路由器，核心internet平面默认路由指向出口，并network宣告进bgp（禁止直接引入静态）该子接口起VRRP，VIP用于核心策略路由下一跳，不与核心起BGP邻居发布：路由策略过滤，只发布DMZ公网网段接收：不控制EIP北向流量策略路由走EIP墙n防火墙上启多个VRF，隔离管理&边界墙，EIP限速墙和VPN墙的路由；VRF名称分别为：management、EIP、VPNXX24业务流量走向-EIP南向天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线说明：

1.互联网出口路由器走到核心的Internet平面

2.匹配EIP的路由到达混合墙，从防火墙EIPVRFInternet子接口进入

3.限速防火墙上配置EIP网段的ECMP路由指到软nat，从限速防火墙的public接口二层到达软nat

4.软nat节点对流量进行DNAT，把目的IP修改为100.64的地址，并通过Public平面的路由送到核心public平面

5.核心根据100.64目的地址送达相应的计算节点

6.计算节点通过流表将100.64转换为虚拟机的私网IP地址，并送往虚拟机

7.整个过程源IP地址不变25业务流量走向-EIP北向天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线说明：

1.EIP北向流量从CNA节点出来，目的IP为公网IP，在核心交换机上public平面匹配策略路由，从EIP防火墙的public接口进入；

2.在防火墙上，匹配默认路由把流量转发到核心的Internet平面，然后出公网。

3.默认路由是核心的Internet平面发出，通过eBGP协议发布给防火墙和public平面。26业务流量走向-VPN南向天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线说明：

1.VPN流量从Internet进来，到达核心的Interne平面下的supervlan4000，通过ARP表项目达到VPN防火墙outbound子接口（Internet地址以VRRP虚地址方式配置，每一个子接口绑定一个VRF，对应一个VPC进行租户隔离）。

2.VPN防火墙解掉IPsecVPN报文头，命中静态路由将报文由Inbound子接口送出，该接口二层直接通到Vrouter

3.Vrouter收到报文，命中流表根据目的地址封装VXLAN，发送到L2GW，由L2GW转给相应的CNA节点（图中没画出L2GW，有些局点规模小于100就没有L2GW）27业务流量走向-VPN北向天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线说明：

1.VM送出访问VPN端点报文，CNA根据流表封装VXLAN报文，经过物理网络送到Vrouter的VETP接口

2.Vrouter解VXLAN后，将报文转发给VPN防火墙Inbunnd子接口（二层通信）

3.VPN防火墙收到报文，命中默认路由走到outbound子接口，进行IPsecVPN打包，送达核心Supervlanif接口

4.核心交换将报文送给internet到达IPsecVPN另外一端公网地址。28业务流量走向-Internet访问Console、APIGW天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线说明：

1.从用户Internet的线路到达核心的Internet平面，由Internet平面进入边界防火墙后，进行相应的DNAT，然后从DMZ平面出来，达到相应的服务。

2.回程流量由DMZ服务到达网关（核心交换），命中默认路由转发给防火墙，防火墙默认路由下一跳走到核心交换internet平面，然后到达出口路由器送给公网。29业务流量走向-Internet流量访问OBS等存储类服务天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线说明：

1.从用户Internet的线路到达核心的Internet平面，由Internet平面进入边界防火墙后，进行相应的DNAT，然后命中NAT路由转发给核心public平面，到达存储TOR，送给OBS、SFS节点。（OBS

2.0服务网卡在DMZ平面，路径与Console一致）

2.回程流量由存储服务到达网关public平面（核心交换），命中默认路由转发给边界防火墙，防火墙默认路由下一跳走到核心交换internet平面，然后到达出口路由器送给公网。30业务流量走向-专线流量访问VPC天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线说明：

1.专线流量从客户侧到达专线网关，专线网关上通过VRF隔离租户VPC，该VRF下指一条VPC网段的静态路由到到Vrouter。

2.专线网关到Vrouter之间通过不同的vlan隔离不同的租户VPC

3.Vrouter把专线流量封装vxlan，发送到L2GW，由L2GW转给相应的CNA节点（图中没画出L2GW，小于100节点局点可能没有配置L2GW）

4.回程路由为来程相反路径，省略31业务流量走向-运维流量天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线说明：

1.无DCI的，使用SVN构建运维通道，与廊坊安全接入区建立IPsecVPN隧道，通过本地的SVN接入，到达核心的public平面，去往其他平面需要过墙，图中红色线路

2.有DCI线路，直接由DCI打通到核心的public平面。核心与华为安全接入区建立GRE隧道。图中黄色线路32业务流量走向-POD区VPC访问公共云服务天翼云Global运维区专线网关网络节点管理节点混合防火墙InternetUSG6515E安全TOR网络服务TOR管理服务TORBMC汇聚BMC-TOR计算TOR存储TOR核心交换CE8850CE12800CE16800计算节点存储节点裸机TORBMGW裸机节点高速平面TOR高速平面汇聚客户网络管理服务区网络服务区计算POD存储POD裸机POD安全服务区Anti-DDOSIDSNIP...逃生链路2*10GE互联网出口区SVNCE6855/CE6865红点表示中接分光器分流器分光器WAF租户侧路由器CE6855/CE6865CE6865CE6865CE8850-32CQCE5855CE5855/6855CE6855CE6865CE6855USG6655ECE6855CE6865CE6855/NE40E2*2*10G2*6*10G10G光口或1G电口40G/100G10G/25G1G业务&管理存储裸机高速运维管理IPSecVPN隧道专线说明：

1.虚拟机访问OBS存储资源通过100.64，直接访问OBS的100.125地址

2.虚拟机访问公共服务通过内部FIP（100.64）的IP，有public平面进入管理防火墙，再从service、DMZ平面出来，访问到公共服务。33云专线访问云平台—工程方案背景部分HCSO专属云无互联网接入，或者专线对接的客户网络没有互联网，客户不能通过互联网访问云平台服务，需要通过云专线进行访问。主要访问服务有：

1.Console平台租户管理界面；创建VPC、虚拟机等

2.API平台租户使用命令接口；

3.OBS访问对象存储；

4.SFS弹性文件服务，访问文件存储；34通过云专线访问云平台—互联网区客户网络专线网关VRF:cloud-service网络TORDMZ区服务OBSSFSinternetDMZPublicServicemanagementEIP混合墙nat管理TOR存储TORVrouterVPC核心交换专线访问VPC路径专线访问云平台服务路径

①专线网关手工新增一个VRF，名称为cloud-service,用于客户访问云服务使用，客户专线到专线网关需要起两段子接口，一段用于访问VPC，一段用于访问云服务

②专线网关侧在上述VRF下多起一个子接口，网络TOR透传该子接口vlan399，核心侧起vlanif399绑定VRFinternet平面下。

③专线网关侧在用户VRF下配置静态明细路由，目的地址为需服务IP映射后地址（一般建议采用100.125网段，OBS与SFS可以不转化），下一跳为核心对接vlanif399；

④混合墙新增一个VRF，名称为nat，隔离用户侧路由使用。

⑤混合墙配置FullNAT，把客户网段源地址转化成

198.

19.

128.0/20（endpoint服务网段）；把客户访问目的地址（一般为100.125）转化为各服务真实IP地址

⑥回程流量：在核心的DMZ与Public平面新增

198.

19.

128.0/20路由指向防火墙相应平面对接子接口，在Internet平面把客户网段路由指向专线网关。

⑦注意：如果有SFS服务写入需求，源地址映射需要配置natserver一对一映射实现。Vxlan隧道L2GWVRF:VPNXX注意：

1、客户与专线网关对接，至少要搞两个子接口，一个是专用访问云服务的，另外一个是访问云上VPC的。

2、无法解决客户线下数据中心IP地址段冲突的问题，原则上只能实现一个客户的访问需求。35通过云专线访问云平台—政务外网区专线接入专线网关VRF:cloud-service网络TORDMZ区服务OBSSFSinternetDMZPublicServicemanagementEIP混合墙nat管理TOR存储TORVrouterVPC核心交换专线访问VPC路径专线访问云平台服务路径

①专线网关手工新增一个VRF，名称为cloud-service,用于客户访问云服务使用，客户专线到专线接入需要起两段子接口，一段用于访问VPC，一段用于访问云服务；

②专线接入墙配置FullNAT，把客户网段源地址转化成

198.

19.

128.0/20（endpoint服务网段）；把客户访问目的地址转化为各服务真实IP地址

③专线网关侧在上述VRF下多起一个子接口，网络TOR透传该子接口vlan399，核心侧起vlanif399绑定VRFinternet平面下；

④专线网关侧在用户VRF下配置静态明细路由，目的地址为服务真实IP地址。需服务IP映射后地址，下一跳为核心对接vlanif399；

⑤混合墙新增一个VRF，名称为nat，实现专线过来的流量跨vrf访问。配置静态明细路由，将去程流量指向DMZ、public平面对接IP，将回程流量指向Internet平面对接IP；

⑥核心回程流量配置：在核心的DMZ与Public平面新增

198.

19.

128.0/20路由指向防火墙相应平面对接子接口，在Internet平面把客户网段路由指向专线网关。

⑦注意：如果有SFS服务写入需求，源地址映射需要配置natserver一对一映射实现。Vxlan隧道VRF:VPNXX注意：客户与专线网关对接，至少要配置两个子接口，一个是专用访问云服务的，另外一个是访问云上VPC的。专线接入防火墙36附录A：天翼云合营池组网（单AZ）计算POD计算服务器管理服务器DMZUDS运维管理服务管理管理服务区内网管理防火墙边界防火墙存储POD存储服务器SVN*2Internet带外管理专网互联网出口区InternetDDOS清洗DDOS检测IDS网络服务区ELBvRouterVPNFWEIPFWsNAT计算POD计算服务器管理服务器裸机PODCN2核心专线接入运维专用通道带外管理核心交换机管理服务器IGW接入37附录B：天翼云合营池组网（双AZ）网络服务区专线接入互联网出口区InternetELBvRouterVPNFW新增加DC互联区DMZEIPFWDDOS清洗DDOS检测IDSsNATDWDM互联网出口区InternetDDOS清洗DDOS检测IDSAZ2计算POD存储POD裸机POD网络服务区专线接入ELBvRouterEIPFWsNATSVN*2运维管理服务区Internet运维专用通道......带外管理专网边界墙内网管理墙NAT64FWIGW接入裸机POD计算POD存储POD存储服务器计算服务器管理服务器计算服务器管理服务器运维管理核心交换机服务管理管理服务区存储服务器AZ1DWDMUDS内网管理墙边界墙SVN*2运维管理服务区Internet运维专用通道......核心交换机3838目录

1.天翼云自研一城一池

2.天翼云合营一城一池

3.天翼云PaaS组件概述

4.天翼云PaaS在内外部IT上云的应用39什么是PaaS？lIaaS（InfrastructureasaService），用户可以动态申请计算、存储和网络等。节省大量的维护费用和办公场地，并随时利用这些硬件来运行应用。lPaaS（PlatformasaService），除了提供基础设施服务之外，还提供运行时和中间件方面的支撑作为服务，即搭建好平台供用户使用，用户只需要在平台上进行软件开发和维护即可，可以节省大量时间和资源。lSaaS（SoftwareasaService），除了提供平台服务之外，还提供数据和应用方面的服务，即将整个产品做成一个软件的形式提供给用户使用，大部分人日常生活中所接触到的云服务基本上都属于该类。毛胚房IaaS基础设施即服务软件即服务平台即服务基础资源池：CPU、内存、硬盘、网络带宽等动态申请，提供IaaS服务除提供IaaS服务外，搭好分布式数据库、缓存、负载均衡、容器等平台，用户只需在平台上开发软件和维护即可，提供平台服务云会议、云办公、天翼看家等，除提供平台服务外，还提供数据和应用方面的服务，整个产品做成一个软件的形式提供给用户使用PaaSSaaS精装房：自己需买电器拎包入住：直接买云产品用40PaaS行业发展趋势数据来源：Gaterner2020追踪p市场：到2024年中国PaaS市场规模将由2019年的

166.9亿元增长至636亿元，年平均增长率30%；2019年数据库和中间件产品在PaaS产品中占比约

91.45%p业界：阿里打造“云+智能”策略，整合现有产品技术体系，推出统一品牌，积极进入SaaS、私有云、混合云等市场打通PaaS产品技术的“部门化”壁垒,使阿里云智能平台成为技术输出、产品输出、对B端服务的统一出口。声称“只做PaaS，不做SaaS”，以“被集成的云”进入SaaS市场，完善生态，把SaaS（软件即服务）层云服务开放给客户和合作伙伴。做PaaS、被集成、建生态Bp发展方向平台化云原生被集成建生态内部加速整合、平台化A内部加速整合、平台化Ap客户：数字化转型需求日趋旺盛IT交付周期长研发运维成本高传统IT业务孤岛问题加速PaaS市场增长PaaS是企业上云的高效低费途径，成为企业数字化转型的最佳选择41天翼云PaaS平台现状介绍1/213款数据库类15款中间件类2款容器管理类14款其他类10款开发运维类p构建了上云技术底座统一ITPaaS平台（云翼），提供多租户管理、组件订购开通、实例管理、资源管理等平台管理功能，初具集成ITPaaS/IaaS一体化运营及安全管控能力，支撑企业“轻松”上云p提供涵盖数据库/中间件/容器/开发运维等50+款ITPaaS常用组件，具备多种产品规格及运维管理能力，支持公有云、私有云、混合云等上云场景外部客户-私有云部署•已落地：广州政务热线、宁德新时代、菲律宾PTO、安徽财政厅预算一体化（今年新增）等标杆客户•推进中：山东重汽、十四运、重庆高速云、湖北医疗云、江苏银泰、重庆燃气等重点项目稳步推进，进展正常内部客户-全面IT上云•目前承载了集团总部、31省公司及专业公司1600+套IT系统，系统上云率45%•ITPaaS平台拉通106个分散资源池、纳管16800台服务器、开通组件实例

1.1万个涵盖数据库/中间件/容器/开发运维等50+款常用组件ITPaaS/IaaS一体化运营及安全管控平台组件产品管理自助订购多租户体系自动化开通实例中心资源管理外部客户-公有云部署•15款ITPaaS产品加载天翼云官网销售•已在28个自研池加载上线•目前在用实例28个，月收入约

1.5万元监控告警能力开放...业界PaaS门类众多，我们定位ITPaaS，做深做广分布式数据库、消息等系列PaaS组件服务，支撑内外部客户IT上云。42天翼云PaaS平台现状介绍2/2•使用方式：提供可独立部署和使用的PaaS组件产品，部署在客户提供的IaaS资源上•适用客户：面向个性化和定制化要求不高、投入成本不高的中小型客户PaaS组件产品服务1•使用方式：提供可独立部署和使用的PaaS平台，为客户提供PaaS综合服务能力，支持客户及第三方PaaS服务快速集成，部署在客户提供的IaaS资源上•适用客户：面向党、政、军、金融等对平台的性能、安全、可靠性、可运维等要求高且有定制化需求的大型客户PaaS平台综合服务2私有云部署•使用方式：以PaaS组件产品方式加载在天翼云门户，提供多种规格及计费能力，客户通过天翼云门户自助订购•适用客户：面向个性化和定制化要求不高、投入成本不高的中小型客户PaaS组件产品服务1公有云订购目标客户•安全可信要求高的党、政、军、金融等客户•对PaaS平台的可靠性/可用性/可运维性要求高的大型客户•投入成本有限的中小规模客户平台支持私有云部署、公有云订购等多种模式，满足客户差异化需求43天翼云自研PaaS平台介绍p建立租户体系ü采用租户管理体系，实现面向租户的组件实例、资源、数据隔离；ü支持总公司-分公司-部门三级运营，实现公司内协同和资源调度p集成组件能力ü集成自研、原生系列组件开通、变更、扩缩容、查询等核心能力；ü支持一站式组件订购，自动完成组件安装、配置工作；ü集成组件控制台，提供对组件实例的在线配置能力p提升IaaS资源利用效率ü统一管理组件开通相关的计算、存储、网络资源，自动初始化资源配置，实现面向组件的资源自动分配与回收，提升资源利用效率。ü支持面向组件及资源的运行状态实时监控p丰富自研组件功能租户管理组件产品实例管理组件产品规格管理组件运营监控管理...计算资源存储资源网络资源公司1应用1公司2公司1租户公司2租户...运营管理PaaS平台资源管理组件能力.........IaaS资源自研组件原生组件商用软件•分布式缓存•分布式消息•分布式数据库•...•tomcat•CentOS•Zookeeper•...•Oracle•Weblogic•WebSphere•...应用2应用

3....应用1应用2应用

3....公司N天翼云公司聚焦企业级云平台建设目标，自主研发，突破多项核心PaaS技术，构建了天翼云PaaS平台提供集成一体化的PaaS服务和IaaS服务，实现分布式云化架构的部署自动化、配置标准化、实施流程化44天翼云自研PaaS平台部署概况统一PaaS平台分为全国公共区、资源池预置区、租户VPC三部分。n全国公共区ü部署在贵州或内蒙资源池，需要与各资源池的预置区网络连通；ü部署有运维管理门户、PaaS门户、组件控制台前端等，向用户提供平台访问和使用的入口；ü对接云道平台、AIOPS等外部系统n资源池预置区ü纳管资源池内建立预置区，需要与各租户VPC网络连通；ü部署有组件控制台后端服务，实现对组件实例的管理和监控；n租户VPCü租户VPC间网络隔离；ü组件实例在租户VPC内按订单要求部署开通；全国公共区资源池预置区租户VPC资源池公共服务全国公共服务组件A组件控制台后端服务组件B...租户VPC1组件A实例组件B实例......资源池1租户VPC2组件A实例组件B实例......资源池n...组件使用人员租户管理员平台运营人员贵州/内蒙资源池统一PaaS平台云道平台AIOPSITSM云统一运维平台（IaaS）外部系统DCOOS...组件A组件BPaaS门户运维管理门户组件控制台前端服务接入层服务层接口服务45天翼云自研PaaS平台能力总体视图p组件开通管理ü支持自助式组件产品快速订购，实现自动化部署ü监控开通全流程p产品规格管理ü纳管自研和开源系列组件ü实现组件产品规格的生命周期管理p租户管理ü建立多租户+用户的管理体系，实现对租户资源及组件实例管理和安全隔离p组件实例管理ü集成各组件产品实例控制台，封装各组件产品服务ü提供统一标准的对外能力开放p设备资源管理ü纳管PaaS施工所需各类IaaS层资源ü实现资源自动化分配和回收，提高资源利用效率p平台能力开放ü实现云翼平台组件监控数据汇聚、数据稽核和数据发送功能ü开放API接口，对外提供组件监控能力pPaaS组件库ü包含云数据库、企业中间件、大数据组件、容器组件、网络组件等类别组件公共支撑采集&监控平台能力开放门户参数管理流程模板管理规则管理组件订购前端门户组件控制台前端门户运维监控前端门户资源导入资源同步资源分类设备资源管理资源分配资源回收资源目录工单调度组件开通管理工单接收工单查询异常处理工单施工施工模板管理租户管理租户信息管理用户权限管理租户应用管理日志采集日志分析系统日志PaaS组件库云数据库企业中间件大数据组件高可用数据库teleDBUDALPostgreSQL分布式消息分布式定时任务调度分布式文件系统密集计算框架hadoopspark产品定义产品配置产品发布产品规格管理实例创建/注销实例扩缩容组件实例管理实例信息维护监控告警45&网容络器容器服务CCSE............负载均衡......46天翼云PaaS平台组件介绍–关系型数据库RDS–分布式数据库DRDS–关系型数据库PG–分布式数据库PG–分布式缓存CtgCache–混合数据库TeleHTAP–文档数据库MongoDB–时序数据库TSDB–列数据Hbase–图数据库GDB–Elasticsearch–Mencached–voltDB–HSQLDB–Mariadb_tx–跨IDC数据同步–数据库管理服务DAS数据库

（17）–监控工具Prometheus–监控工具Zabbix–监控工具Grafana–日志管理ELK–配置工具ansible–Pinpoint–ZipKin运维工具

（7）大数据计算

（5）–分布式消息Ctgmq–消息中间件kafka–消息中间件RabbitMQ–微消息队列MQTT–消息队列NATS–分布式消息发布Pulsar消息中间件

（6）–Hadoop（MapReduce）–Spark–Storm–数据仓库Hive–数据查询Impala–容器管理引擎CCSE–WEB容器Tomcat–WEB容器apache–分布式服务协同zookeeper–微服务–函数计算–开放平台(Istio)容器应用服务

（7）文件管理

（3）–分布式文件系统–对象存储Ceph–Hadoop（HDFS）其他

（5）–密集计算框架–负载均衡–高可用管理（keepalivd）–Hadoop（Yarn）–基础环境（Centos）p提供涵盖数据库/中间件/容器/开发运维等50款PaaS常用组件，具备多种产品规格及运维管理能力，支持公有云、私有云、混合云等上云场景p自研16款组件完成国产服务器、国产操作系统适配，其中高可用数据库（TeleDB）、关系型数据库（TelePG）、WEB中间件3款产品完成信创评测并通过全部测试项47核心组件介绍：关系型数据库RDS介绍迫切需要实现低成本、高可靠和高可用的关系型数据库系统，替代传统关系型数据库。Ø部署繁琐：社区开源版的人工部署，对技术能力有一定要求；Ø运维复杂：需投入开发监控系统，同时投入运维团队进行日常运维；Ø性能瓶颈：社区开源版的MySQL采用的是传统连接模式——每连接每线程，在高并发的场景下，性能存在较大幅度的下降。Ø可用性方案：目前开源存在的有基于MHA方案，Keepalived的方案，但以上方案均容易出现误判、漏判等不足。Ø可靠性方案：应用层容灾、基于复制的方案、基于cluster的方案以及基于共享存储的方案，都有明显的缺点，有的实现复杂，有的性能较差，又或是成本高企MySQL是全球最流行的开源关系型数据库管理系统之一，具有良好的跨平台能力。但是社区版的关系型数据库mysql距离提供生产级别的服务能力还面临着不少问题：传统MySQL面临的挑战u天翼云关系型数据库MySQL版是一款基于云计算平台的在线关系型数据库服务，完全兼容MySQL

5.7，提供单机的基础版、一主一备高可用版、一主两备高企业版。u在容灾、备份、恢复、监控、报警等方面提供全套数据库解决方案天翼云关系型数据库RDS是全球最流行的开源关系型数据库管理系统之一，具有良好的跨平台能力。48核心组件介绍：关系型数据库RDS产品优势高可用性•即开即用：通过官网实时生成目标实例，关系型数据库服务配合弹性云服务器一起使用，通过内网连接关系型数据库可以有效的降低应用响应时间、节省公网流量费用。•弹性扩容：根据业务情况弹性伸缩所需的资源，按需开支，量身订做。配合云监控（CloudEye）监测数据库压力和数据存储量的变化，灵活调整实例规格。•完全兼容：关系型数据库各引擎的操作方法与原生数高可靠性•双机热备：关系型数据库服务采用热备架构，故障秒级自动切换。•数据备份：每天自动备份数据，上传到对象存储服务。备份文件保留732天，支持一键式恢复。用户可以设置自动备份的周期，还可以根据自身业务特点随时发高安全性•网络隔离：通过虚拟私有云（VPC）和网络安全组实现网络隔离。关系型数据库实例运行在租户独立的虚拟私有云内，可提升关系型数据库实例的安全性。•访问控制：通过主/子帐号和安全组实现访问控制。通49核心组件介绍：关系型数据库RDS产品特性和优势对比轻松易用•快速创建：分钟级快速部署•全面监控：提供多达十几项的监控指标数据•便捷运维：web控制台实现一键式便捷操作高可用自动故障切换：高可用版和金融版自动搭建2~3节点副本集，当主节点出现故障后，系统自动选举新的主节点接管服务安全性网络隔离：运行于私有网络（VPC）内，与其他租户保持隔离，确保数据安全性天翼云关系型数据库RDS自建Mysql系统部署支快速部署，仅需分钟级的等待时间，便可完成RDS-Mysql云数据库目标实例的创建社区开源版的人工部署，对技术能力有一定要求系统运维提供web控制台，对实例重启、数据库备份、数据恢复等高频需求实现一键式便捷操作图开界面提供包括CPU利用率、内存利用率、磁盘使用率、IOPS、连接数、网络流量、TPS、QPS等关键监控指标数据。让您对运行状态了如指掌。需投入开发监控系统，同时投入运维团队进行日常运维弹性扩容天翼云提供在线扩容的能力SCALEUP的模式，在容量空间不够时，需购买新机器，上线时会中断线上业务数据可靠性天翼云关系型数据库RDS提供自动化的物理热备份功能和一键恢复功能社区开源版只支持逻辑备份，需要手工操作。高可靠•数据备份：支持物理热备份，相比逻辑备份速度更快，对业务影响更小，支持自动备份和手动备份两种方式。•数据恢复：支持一键恢复数据至当前实例50核心组件介绍：分布式数据库DRDS分布式关系型数据库基本能力集ü底层数据库类型：MySQLü规格：支持3个系列共7种规格，规格从4核8G到64核128G不等ü读写分离：支持透明读写分离和应用级读写分离，分担数据读取压力ü在线配置：支持在线修改数据库属性，实时生效ü数据分片：支持多种数据切分方式，满足各类数据场景ü运维监控：可实时查看服务节点的运行状况（CPU、内存、慢SQL）ü统计分析：统计分析各类慢SQL、广播SQL、错误SQL，快速定位性能瓶颈DRDS是一种兼容MySQL协议和语法，支持自动水平拆分的高性能、高可靠分布式关系型数据库；数据访问对应用透明，适用于TB或PB级的海量数据场景。±传统单机数据库的问题ｰ容量瓶颈ｰ扩展困难ｰ成本高昂±分布式关系型数据库的优势ｰ突破单机存储与性能瓶颈ｰ降低企业成本ｰ动态平滑扩缩容OracleRACOracleRAC数据复制应用层TeleUDAL（统一数据访问层）dn1dn

2...TeleDB（数据高可用）应用层传统架构分布式架构51核心组件介绍：分布式数据库DRDS产品特性扩展自动水平拆分支持多种分片算法支持字符串，数字，日期等多种拆分纬度业务不中断平滑扩容开发支持SQL92标准兼容MYSQL协议、语法兼容大部分MYSQL客户端业务零代码改动，实现读写分离安全分布式架构无服务单点，服务稳定完善的数据层主备容灾方案，具备故障主备自动切换功能数据存储高可靠，一份数据可存储多个备份性能对比单机数据库服务能力线性提升全局表同步功能，分布式JOIN效率成倍提升单机平均性能：~11wTPS（4路8核，36GB内存，万兆网卡）运维配置简单完善的监控体系成本使用弹性云主机，高效、可靠、安全开源软件+自研结合52核心组件介绍：分布式数据库DRDS产品优势A数据库分为SQL和NoSQL型。SQL型以各种关系型DB为代表(如ORACLE、MySQL)，存储结构化数据；NoSQL数据库相对关系型DB而言，由于结构化信息的缺失，往往不能做各种关联查询，对复杂业务场景支持较差。C降低企业成本：使用廉价X86+廉价存储+开源软件及自研结合的“去IOE”模式，相比商业产品大幅节约企业投入B存储复杂结构化数据的分布式关系型数据库可ScaleOut（横向）方式扩展，针对各类应用的数据模型，采用合理的数据切片策略后，可突破存储与性能瓶颈。D通过实现数据访问节点的动态平滑扩缩容，应对峰值流量53核心组件介绍：分布式数据库DRDS产品和同类产品对比功能对比DRDS阿里云华为产品系列基础版、中级版、高级版入门版、标准版、企业版、至尊版无系列产品规格支持最大64核128G支持最大256核512G支持最大256核512G计费模式按周期按周期、按量按周期、按量协议兼容MySQLMySQLMySQL分片算法支持简单Hash、日期Hash、枚举Hash、二维枚举Hash简单Hash,、日期Hash简单Hash、范围Hash用户权限基于用户的权限管理，基于角色的权限管理，可视化权限管理基于用户的权限管理基于用户的权限管理，可视化权限管理SQL审计支持DML审计和DDL审计无无语句统计语句执行状态统计，TopSQL统计等少量或没有少量或没有组件监控实时QPS、实时语句、慢SQL监控、前后端连接状态、锁表状态,、节点GC状态等少量或没有少量或没有读写分离支持支持支持资源监控进程级CPU，内存监控资源监控、引擎监控资源监控、引擎监控网络支持Vpc访问、安全组外网访问、专有网络虚拟私有云、安全组54核心组件介绍：分布式数据库DRDS应用场景交易型应用大并发、大数据量、以联机事务处理为主的交易型应用，如电商、金融、O2O、电信CRM/计费等，服务能力支持线性增长、弹性扩缩，应用可按需选择不同的部署规模。物联网数据在工业监控和远程控制、智慧城市的延展、智能家居、车联网等物联网场景下，传感监控设备多，采样率高，数据存储要求高，超大数据规模存储的问题。大数据存储存储海量结构化历史数据，提供给大数据分析使用，解决非结构化数据库难以表达和存储复杂结构化数据的问题。而结构化关系型数据是大数据分析中最有价值的数据之一。高并发实时交易场景•电信、电商、金融、O2O、零售等用户基数大、营销活动频繁，数据库响应慢等问题，成为严重制约业务发展的瓶颈：•

1、提供线性水平扩展能力，能够实时提升数据库处理能力；•

2、提高访问效率，轻松应对高并发的实时交易场景；•

3、应用可按需选择不同的部署规模。海量数据存储访问场景•工业制造、智能家居、物联网等超大规模数据存储访问，超过单机数据库存储能力极限的数据场景:•线性扩展存储空间，目前可以支持100+MySQL实例的单数据库集群，提供PB级存储能力。55核心组件介绍：容器管理引擎CCSE容器云服务引擎（CCSE）提供高性能可伸缩的一站式容器应用管理服务，简化集群的搭建和扩缩容等运维工作，为容器化应用提供监控、日志、服务网格、模板市场、HPA、持久化存储等基础能力，帮助企业快速构建和运行可弹性扩展的应用，实现业务的快速交付与持续创新。•功能、文档不完善•研发方向不受控•学习成本高开源:Openshift、Rancher...•厂商绑定•使用成本高商业:阿里ACK、腾讯TKE...•不支持多集群统一管理•不支持多租户、细粒度权限管理•概念难理解Z，使用门槛高•监控运维功能不完善原生K8s自主研发更懂应用的容器云服务引擎CCSE56核心组件介绍：容器管理引擎CCSE产品特性1324特色功能n支持多租户、多集群统一管理n支持应用无侵入集成监控、日志、服务网格、HPA、持久化存储等基础能力n提供高可用、高性能的镜像管理功能n提供丰富的PaaS组件模板，支持界面化一键部署到K8S集群简单易用n界面化一键创建K8S集群n一站式部署和运维容器应用，深度集成Istio服务网格，真正实现开箱即用n全面准确的监控指标、完善的监控告警体系弹性伸缩n支持集群节点、工作负载的弹性伸缩n支持手动伸缩和自动弹性伸缩n支持组合多种弹性策略以应对业务高峰期的突发流量开放兼容n提供全面标准的OpenAPI，支持CI/CD快速接入n与社区Kubernetes最新版本保持紧密同步，完全兼容原生API和命令行n支持对接第三方监控和日志系统，支持对接外部存储56高效调度安全可靠n集群控制面HA，集群内节点和应用支持多AZ，保障业务高可用n提供基于角色的细粒度权限控制(RBAC)n支持自定义网络安全隔离策略n提供节点以及工作负载间的亲和性/反亲和调度n支持对故障实例的秒级接管以及故障实例的自我修复n整合平台监控数据，动态分析，智能精细化资源调度，大幅提升资源利用率57核心组件介绍：容器管理引擎CCSE产品优势ü结合DevOps帮助用户快速开发、构建、部署和运维分布式应用，提供一站式容器服务ü为应用提供监控、日志、负载均衡、灰度/蓝绿、HPA、持久化存储等基础能力ü提供高可用、高性能的镜像服务，构建组件市场，提升应用容器化效率ü提供插件机制，可方便快速扩充CCSE平台能力以应用为中心ü支持多租户、多集群统一管理，支持细粒度的权限管控üKubernetes对底层的物理资源做集中管理与统一调度；资源管理ü对接PaaS云平台，支持在PaaS门户开通CCSE服务ü支持客户在私有云环境独立部署CCSE产品模式58核心组件介绍：容器管理引擎CCSE和同类产品对比对比项CCSE自建Docker+K8S集群–通过控制台一键创建高可用集群。–提供容器优化的OS镜像，提供稳定测试和安全加固的Kuberntes和Docker版本。–支持多集群管理。–用户手动部署集群并自行开发。–用户自行探索和开发。应用–支持灰度/蓝绿发布。–支持应用监控，应用弹性伸缩。–用户自行探索和开发。网络–提供经过优化的高性能Calico网络插件，性能优于普通网络方案20%。–支持容器访问策略和容器带宽限制。–需要挑选社区网络插件进行适配。–用户自行探索和开发。运维–支持Kubernetes新版本一键升级，支持Kubernetes集群自动添加节点。–提供高性能日志采集Agent，支持10万QPS。–用户自行探索和开发。59核心组件介绍：容器管理引擎CCSE应用场景快速实现微服务化实现敏捷开发和部署落地，加速企业业务迭代通过合理微服务拆分，将每个微服务应用存储在CCSE的镜像仓库中。由CCSE提供调度、编排、部署和灰度发布能力。持续集成与持续交付开放完整API给DevOps系统调用，实现从代码提交到应用部署的完整流程，开发人员只需关注代码的开发。•实现代码构建、镜像构建和应用部署的全流程自动化。•环境一致性：容器技术让您交付的不仅是代码，还有基于不可变架构的运行环境。业务快速上云快速实现应用容器化部署，同时也可达到自动伸缩、按需部署、高可用、水平扩展、降低人力成本的效果。应用场景60分布式消息中间件ctgmq：背景（不能让客户等很久）想象一下，如果你是一个用户，在支付完一个订单之后，界面上会有一个圈圈不停的旋转，让你等待好几秒之后才能提示支付成功。对用户来说几秒钟的时间，会让人非常不耐烦的!61分布式消息中间件ctgmq：背景（怎么解决呢）解决这个问题的一大利器就是消息中间件，英文全称“MessageQueue”，简称MQ在引入消息中间件以后，系统A和系统B之间就由同步变为异步通信，而完成这样的一个核心概念就是“消息”n系统A发送消息给MQ后，就认为已经完成了自己的任务；然后系统B根据自己的情况，可能会在系统A投递消息到MQ之后的1秒内，也可能是1分钟之后，也可能是1小时之后，多长时间都有可能。n反正不管是多长时间后，系统B会根据自己的节奏从MQ里获取到一条属于自己的消息，再根据消息的指示完成自己的工作。n在“异步调用”的整个过程中，系统A仅仅是发个消息到MQ，至于系统B什么时候获取消息，有没有获取消息，系统A是不管的。62分布式消息中间件ctgmq：消息中间件是什么你可以理解为它是一个中介。一个强大的中介，生产者只管往消息队列存数据（生产），消费者只管拿数据。（消费）举个简单的例子：小哈是个卑微的微商，有一天他突然收到了朋友小希的私信，要代购两台SWitch，于是他代购完毕后就填写了快递的信息，寄给了小希。随着越来越多的朋友找他代购，快递信息越来越多，小哈有点力不从心了，于是他请了一个助理帮忙（消息中间件），客户有什么需求，也都可以直接交给助理（削峰），如果有新的客户，直接联系助理即可（解耦），等到小哈忙完了，就可以在助理这里拿到客户的需求再决定如何处理（异步）。消息中间件是用于分步式系统之间收发消息的组件63分布式消息中间件ctgmq：作用（解耦）传统模式的缺点：系统间耦合性太强，如上图所示，系统A在代码中直接调用系统B和系统C的代码，如果将来D系统接入，系统A还需要修改代码，过于麻烦！中间件模式的的优点：将消息写入消息队列，需要消息的系统自己从消息队列中订阅，从而系统A不需要做任何修改。VS64分布式消息中间件ctgmq：作用（异步）传统模式的缺点：一些非必要的业务逻辑以同步的方式运行，太耗费时间。中间件模式的的优点：将消息写入消息队列，非必要的业务逻辑以异步的方式运行，加快响应速度VS65分布式消息中间件ctgmq：作用（削峰）传统模式的缺点：并发量大的时候，所有的请求直接怼到数据库，造成数据库连接异常。中间件模式的的优点：系统A慢慢的按照数据库能处理的并发量，从消息队列中慢慢拉取消息。在生产中，这个短暂的高峰期积压是允许的。VS66分布式消息中间件ctgmq：自研VS原生原生电信自研VSRocketMQ、KafkaCtgMQ、CtgKafka无法掌握核心代码，依赖社区版本变更后台手工部署后台命令查看，繁琐依赖第三方监控配置修改、扩缩容后台操作核心代码自主掌控，根据实际需要进行版本快速迭代云翼平台订单式一键开通部署界面化查看，简单、一目了然前台界面监控+北向、云眼监控配置修改、扩缩容界面操作后台命令手工重启前台一键重启中国电信自研消息中间件和原生消息中间件的比对67分布式消息中间件ctgmq：概述和应用场景是一种具备消息有序、不重、不丢失，高堆积低损耗等特性的中间件产品，并提供运维管理、监控预警、动态扩容等配套功能。分布式事务基于消息有序、不重、不丢失的特性，通过发送事务型消息，实现数据的最终一致性。削峰填谷对于突发流量，数据可先堆积在MQ，消费者按照实际能力来处理，防止雪崩效应和消息丢失。系统解耦通过MQ解耦系统间的依赖关系，将调用进行异步化处理，提升整体性能。应用场景消息复用数据生产一次并堆积到MQ，不同消费场景可多次复用。分布式事务削峰填谷系统解耦消息复用概述68分布式消息中间件ctgmq：特性与功能1324消息有序、不重、不丢失n通过指定发送路由，确保消息有序n实现严格消费，确保消费不重复n一份消息多份落盘存储，确保消息不丢失可视化的管理后台n简单的配置管理界面n多维度的运行指标监控高扩展n支持按节点、按队列水平在线扩展n支持生产者、消费者的动态扩展特色功能n通过发送事务型消息，实现数据的最终一致性n支持消息轨迹查询及追溯n根据TAG可以进行消费过滤，增加消费灵活性56高性能高可用n分布式架构无服务单点，确保服务稳定n异常状态下主备自动切换，确保服务可用n数据定期自动删除，确保组件平稳运行n服务能力线性提升n同步双写模式下，TPS达到

2.5万+n亿条2k大小消息堆积时，性能影响<10%69分布式消息中间件ctgmq：部署n云翼平台订单式开通n多种部署规格可选n一键部署70分布式消息中间件ctgmq：运营n云翼平台全方位监控n北向接口对接云眼进行监控n扩容、缩容、配置修改、组件重启等71分布式消息中间件ctgmq：应用场景系统间请求异步解耦，通过消息堆积与高性能特性，实现平谷削峰通过消息广播，高效地把分布式应用联系起来高效地异步同步日志，进而做实时或离线分析通过消息将数据分发到多个系统进行处理应用场景异步解耦事件通知数据复制日志处理72分布式消息中间件ctgmq：应用案例作为物联网crm和计费之间资料传输的分布式消息接口，有效减轻了批量业务处理及月末、月初出账的系统压力。前京东零售技术架构部资深架构师李玥，在2018年带领团队重构了京东自研的消息队列产品JMQ，实现了超过2000个节点的超大规模集群部署，抗住了多次“

11.11”和“618”大促、超过万亿流量洪峰的考验。CtgMQ：JD：------------------------------------------------------------------------------------云翼kafka实时接收和处理全网31省+集团的北向接口数据，并传输给云眼进行监控，瞬时最高TPS达20W+，每天

12.5亿+条数据量，整体数据传输流程3分钟及时率达100%。有效保障了全网PaaS组件的监控运营工作。CtgKfka：73分布式消息中间件ctgmq：常见分布式消息中间件比对方案CtgMQRocketMQKafkaRabbitMQActiveMQ消息高可靠不丢失可靠性高机器重启消息可能丢失高负载下消息可能丢失可靠性高2K消息大小，亿级堆积能力性能损耗<10%性能损耗<10%性能损耗<10%性能损耗<50%性能损耗<25%主备模式可能出现异常开源系统bug修复核心源码掌控程度达100%，可持续自主维护依赖社区依赖社区依赖社区依赖社区API易用性自定义协议自定义协议自定义协议支持多种消息协议支持多种消息协议运维能力完整的运维功能无无Web监控台Web监控台定制化需求自主研发，纳入迭代开发无无无无客户端支持Java，C++仅JavaJava、C++等Java、C++等Java、C++等分布式事务消息事务消息无无无无74分布式文件系统（CTDFS）：概述与应用场景概述基于云计算与大数据领域经典分布式存储与计算技术生态Hadoop自主研发。提供PB级数据大小与10亿量级文件数的存储与计算能力，尤其适用于海量小文件处理场景。自初始版本以来，历经多次迭代，现已发展成为集分布式存储、计算、服务、安全等功能于一体的云平台产品，具有高稳定性、高可靠性、高吞吐量、高容错、动态伸缩、廉价存储等特点。分布式离线计算提供了基于MapReduce框架的分布式计算接口。面对多种类型的海量文件数据，分布式文件系统的分布式计算接口提供更优的逻辑分片功能，有效的提升海量数据离线计算的效率。同时提供标准化计算模型，适用于统计分析、用户画像、行为分析、趋势预测等场景。离线计算能够对数据资源进行更为充分的挖掘。行业应用分布式文件系统可以作为各类需要结合云计算与大数据能力的行业应用核心组件。存储包括电信话单文件、电子档案文件、设备信息数据、在线订单数据、多媒体数据等在内的多种类型海量数据，提供了标准化协议支持和高度安全的用户鉴权机制，可应用于通信、物联网、电子商务、政府、会计档案、教育等行业。海量数据存储支持多种类型海量数据的存储且支持对存储能力的横向灵活扩展。通过Kerberos认证机制以及多副本机制实现鉴权控制和冗余备份从而保证数据的安全可靠。适用于各类分布式存储与信息管理系统、电子档案存储系统、大数据应用平台等，承载各类应用。应用场景HDFSwithNameNodeHAHDFSFileHandlePoolHBasewithMasterHAZooKeeperServerAmbariKafkaPrometheusKerberoswithKDCHAStandbyCTDFSShellTerminalFTPServeronCTDFSHTTPServeronCTDFSMapReduceonCTDFSUsersandApplicationsO&MsandManagers75分布式文件系统（CTDFS）：组件介绍±组件能力ｰ海量存储能力：需要支持PB级存储能力，支持存储能力的横向扩展。ｰ海量文件存储能力：提供亿级文件的存储能力。ｰ访问协议：提供FTP、HTTP协议支持，专用API或FUSE等多种访问方式。ｰ数据高可靠性：具备多副本或者类似的机制，保证数据不丢失等。±主流产品ｰHDFS：Apache开源基金会下的顶级项目。Hadoop分布式文件系统HDFS提供了一个高度容错性和高吞吐量的海量数据存储解决方案。ｰTFS：TFS（TaobaoFileSystem）是淘宝自主开发的一个分布式文件系统，适用于海量小文件存储。ｰFastDFS：阿里巴巴开源的一套轻量级、分布式设计的文件系统。ｰCeph：加州大学圣克鲁兹分校的SageWeil攻读博士时开发的分布式文件系统。±组件价值ｰ分布式文件系统为整个网络上的文件系统资源提供了一个逻辑树结构，将固定于某个地点的某个文件系统，扩展到任意多个地点/多个文件系统，众多的节点组成一个文件系统网络，每个节点可以分布在不同的地点，通过网络进行节点间的通信和数据传输，可以有效解决数据的存储和管理难题。ｰ人们在使用分布式文件系统时，无需关心数据是存储在哪个节点上、或者是从哪个节点从获取的，只需要像使用本地文件系统一样管理和存储文件系统中的数据。76分布式文件系统（CTDFS）：基础开源组件概述分布式文件系统（ChinaTelecomDistributedFileSystem，CTDFS），又称“分布式小文件系统”，是中国电信广州信息化研发中心分布式文件系统团队基于开源组件HDFS、HBase、ZooKeeper等自主研发的分布式文件系统组件，尤其适用于海量小文件场景下HDFS处理能力不足的情况。±HDPｰHDP（HortonworksDataPlatform）基于集中化架构（YARN），是业内一款极其安全且可用于企业的开源ApacheHadoop分布式系统。ｰ可以迅速、便捷、高性价比的方式处理多渠道、多格式的数据，集成了包括MapReduce、Hadoop分布式文件系统（HDFS）、HCatalog、Pig、Hive、HBase、ZooKeeper以及Ambari等在内的ApacheHadoop的基本组件。ｰ分布式文件系统组件所依赖的基础开源组件包括HDFS、HBase、ZooKeeper、MapReduce等。±Ambariｰ基于Web的ApacheHadoop集群的供应、管理和监控工具。ｰ目前已支持大多数Hadoop组件的集中管理，也是5个顶级Hadoop管理工具之一。ｰ通过安装向导简化了集群供应。ｰ预先配置好关键的运维指标，可以直观查看组件健康状态。ｰ支持作业与任务执行的可视化与分析，能够更好地查看依赖和性能。±Kerberosｰ一种网络认证协议与基于该协议开发的安全认证系统。ｰ通过密钥系统为客户机/服务器应用程序提供强大的认证服务。77分布式文件系统（CTDFS）：特性与功能2435弹性伸缩n集群节点平滑扩展与收缩，应用无感知。n廉价存储，具有高度容错性。n监控数据节点的存储规模，提供自动保持各节点的数据存储均衡能力。高可用n分布式架构无服务单点，服务稳定。n各节点部署Agent，负责启停、监控、守护。n提供多副本机制，监控检测到节点异常时，管理中心负责将数据迁移到其它节点，保证数据完全可靠。易用性n提供标准API，应用可通过SDK、RESTful、FTP等多种方式使用组件。n数据访问对应用透明，应用开发难度低。n提供Web控制台，组件管理操作简单。n提供图形化界面实现自动化部署，便捷运维。高性能n压测达到网络瓶颈，低CPU与内存资源占用。n服务能力并发线性增长。n对小文件的合并操作与分级管理，大大降低了管理节点的压力，提高了性能。n具体的文件读写被分发到不同的HDFS节点，能充分发挥集群大量硬盘的IO能力。1特色功能n海量小文件高效处理。nPB级别与10亿量级的存储与计算能力及横向扩展。n元数据分布式管理，提供实时处理能力。n图形化部署、管理与运维功能。n跨数据中心异地容灾机制。6技术生态n基于MapReduce框架提供分布式离线计算接口。n集成Ambari与Promethus组件，提供全方位、多维度的指标监控机制和自动化部署功能。n基于Kerberos安全认证体系，实现高度安全的用户访问控制。n开放大数据分析接口，应用于实时计算、指标日志分析、智能推荐、趋势预测等场景研发。78分布式文件系统（CTDFS）：ZooKeeperZooKeeper是一个分布式的，开放源码的分布式应用程序协调服务，是Google的Chubby一个开源的实现，是Hadoop的重要组件。它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。±数据结构ｰ分层结构。ｰ树形结构中每个节点叫作ZNode。ｰ每个Znode都有数据（byte[]类型），也可以有子节点。ｰ节点路径：斜线分隔：/Zoo/Duck；没有相对路径。ｰ通过数据结构stat来存储数据的变化、ACL的变化和时间戳。ｰ数据发生变化时，版本号会递增。ｰ对ZNode中的数据进行读写操作。±访问控制列表（ACL）ｰAccessControlLists，类似于Linux/Unix的权限控制。ｰ权限列表：CREATE：创建子节点的权限。READ：获取节点数据和子节点列表的权限。WRITE：更新节点数据的权限。DELETE：删除子节点的权限。ADMIN：设置节点ACL的权限。79分布式文件系统（CTDFS）：HDFSHadoop分布式文件系统(HDFS)被设计成适合运行在通用硬件(commodityhardware)上的分布式文件系统。它是一个高度容错性的系统，适合部署在廉价的机器上。HDFS能提供高吞吐量的数据访问，非常适合大规模数据集上的应用。±设计思路ｰ一次写入、多次读取模式是最高效的。ｰ采用Master/Slave架构，每组HDFS集群是由一到两个NameNode和一定数目的DataNode组成。±核心模块（NameNodeDataNode）ｰNameNode是一个中心服务器，负责管理文件系统的命名空间、元数据信息（MetaData）和客户端对文件的访问。ｰDataNode负责管理所在节点的存储，以数据块（Block）为基本存储单元。ｰDataNode通过向NameNode发送心跳保持与其联系，如果一定时间内NameNode没有收到DataNode的心跳，则认为其已经失效，并复制其上的Block到其它DataNode。80分布式文件系统（CTDFS）：HDFS±元数据（MetaData）ｰ操作日志（EditLog）：记录文件创建、删除，修改文件属性等操作。ｰFSImage（HDFS元数据镜像文件）：完整的命名空间；FileBlock映射关系；文件属性。±数据块放置策略ｰ在启动的时候，每一个DataNode自检它所属的机架ID，然后在向NameNode注册的时候告知它的机架ID。HDFS提供接口以便很容易地挂载检测机架标示的模块。ｰ默认的HDFSBlock放置策略在最小化写开销和最大化数据可靠性、可用性以及总体读取带宽之间进行了一些折中。ｰ一般情况下复制因子（对应配置项为dfs.replication）为3，HDFS的副本放置策略是将第一个副本放在本地节点，将第二个副本放到本地机架上的另外一个节点而将第三个副本放到不同机架上的节点。±数据块（Block）ｰ基本存储单元。ｰ默认大小为128MB，对应配置项为dfs.blocksize。ｰ如果上传文件小于该值，仍然会占用一个Block的命名空间（NameNodeMetadata），但是物理存储上不会占用如此大的空间。81分布式文件系统（CTDFS）：HDFS±文件写入ｰClient向NameNode发起文件写入的请求；ｰNameNode根据文件大小和数据块配置情况返回给Client其所管理部分的DataNode的信息；ｰClient将文件划分为多个数据块，根据DataNode的地址信息按顺序写入到每一个DataNode块中。±文件读取ｰClient向NameNode发起文件读取的请求；ｰNameNode返回文件存储的DataNode的信息；ｰClient读取文件信息。82分布式文件系统（CTDFS）：HDFS在标准配置中，NameNode是HDFS集群中的单点（SPOF）。每个集群都有一个NameNode，如果该主机或进程不可用，整个集群将不可用，直到NameNode重新启动或在新主机上启动为止。SecondaryNameNode不提供故障转移功能。83分布式文件系统（CTDFS）：HBaseHBase是一个分布式的、面向列的开源数据库，在Hadoop之上提供了类似于GoogleBigTable的能力。HBase是ApacheHadoop项目的子项目。它是一个适合于非结构化数据存储的数据库。±数据特点ｰ大表：一个表可以有上亿行，上百万列。ｰ面向列：面向列（族）的存储和权限控制，列（族）独立检索。ｰ稀疏：对于为空（Null）列，并不占用存储空间，因此表可以设计的非常稀疏。±核心模块ｰRegionServer：维护HMaster分配给它的Region，提供数据的读写服务，当客户端访问数据时，直接和RegionServer通信。ｰHBaseMaster：Region的分配，DDL操作（创建表、删除表等）。ｰZookeeper：应用协调，维护一个活跃的集群状态。

（1）保证任何时候，集群中只有一个ActiveMaster。

（2）存贮所有Region的寻址入口。

（3）实时监控RegionServer的状态，将RegionServer的上线和下线信息实时通知给Master。ｰ所有的HBase数据存储在HDFS文件系统中，HDFSDataNode存储着RegionServer管理的数据，RegionServers在HDFSDataNode中是可配置的，并使数据存储靠近在它所需要的地方，就近服务。ｰNameNode维护物理数据块的元数据信息。84分布式文件系统（CTDFS）：HBaseHBase使用MemStore和StoreFile存储对表的更新。数据在更新时首先写入Log(WAL)和内存(MemStore)中，MemStore中的数据是排序的，当MemStore累计到一定阈值时，就会创建一个新的MemStore，并将老的MemStore添加到flush队列，由单独的线程flush到磁盘上，成为一个StoreFile。于此同时，系统会在ZooKeeper中记录一个redopoint，表示这个时刻之前的变更已经持久化了。85分布式文件系统（CTDFS）：组件应用物联网CRM系统物联网使能平台集中MSS项目电子档案云化平台广东电信上海电信云南电信重庆电信浙江电信河北电信More...集团差异化结算项目海南电信86跨IDC数据同步工具：概述与应用场景概述支持关系型数据库、NoSQL、分布式文件系统等异构数据源间的数据同步和传输服务。基于日志和表机制的远程复制技术，为同机房、跨机房、异地及异构数据库间提供可靠数据同步，解决远距离、毫秒级异步数据传输难题。可轻松为企业构建安全、可扩展、高可用的数据架构。异地灾备系统将生产系统中海量的数据实时备份到容灾系统中。云迁移和云备份用于将企业内部的数据迁移到云端的数据库中。将云端分布式数据库的数据实时进行备份和存储。云同步和数据订阅实时将云端分布式数据库的数据同步到其他异构的数据库中，例如：oracle、hadoop、kafka等应用场景。应用场景NodeSETLZookeeperZookeeperZookeeperNodeSETLNodeSETLManager煨庹梁DBMySQLMySQLOracleDRDSHDFS87跨IDC数据同步工具：特性与功能2435特性与功能可扩展性n工作节点支持水平扩展nZookeeper和Node节点集群化部署，支持动态扩展高可用n分布式架构无服务单点，确保服务稳定n数据迁移时，可感知数据库主备切换n网络异常时，支持数据断点续传易使用n支持故障自动切换恢复n具备运维监控管理等配套功能n支持并行调度、SEDA策略、数据合并和延迟监控保障数据同步的实时性高性能nSQL数据库增量同步单通道>30000TPS（万兆网卡）nSQL数据库全量同步>80000TPS（万兆网卡）nSQL数据库同步，SETL分阶段执行，E、T两阶段支持并发执行，并发度可配61特色功能n支持异构数据库间同步n支持核对同步数据，保障源库和目标库数据一致性n支持同步到分布式文件系统n支持按表挂起功能，实现表级的故障隔离低成本运维n提供WEB控制台，操作简单n数据同步及迁移提供多维度的监控指标，包括工作状态、延迟时间、同步进度、吞吐量等n提供日志管理，可查看、检索异常信息88跨IDC数据同步工具：整体功能视图88公共模块数据库能力开放前端门户用户管理版本管理资源管理系统迁移数据库同步文件同步与迁移数据库同步数据核对同步计划故障切换增量同步异构迁移同步位点设置文件同步与迁移同步计划全量同步单向同步增量同步双向同步代理部署文件支持ARM/IPV61对多同步级联同步数据源扩展离线同步权限管理采集&监控监控告警日志采集日志分析数据稽核协调调度配置管理底层能力文件系统数据库文件传输文件监控跨平台备份系统传输系统快照加密压缩......RDSNosqlMessaging加密解密同步传输分布式文件......基础系统迁移迁移计划代理部署Windows迁移主机管理Linux迁移主机监控能力优化主备容灾操作审计自动升级系统日志减少系统依赖代理反馈全量同步表结构自动同步异常恢复l一对一单向全量同步（定时+实时）l一对一单向全量同步后增量同步（实时）l一对一双向全量同步（定时+实时）l一对一双向全量后双向增量同步（实时）文件同步场景l单机整机迁移（Windows）l单机整机迁移（Linux）系统迁移场景l异构数据迁移l增量数据同步l异地双活数据库同步场景89跨IDC数据同步工具：功能规划

（一）容灾备份一体化平台Ø基于同步、迁移的基础能力，到至灾备、双活进阶功能（容灾备份一体化平台）备份同步迁移容灾双活多活故障切换流量控制灰度发布基础能力应用监控调度管理服务告警90跨IDC数据同步工具：功能规划

（二）90Ø基于不同的数据源实现数据融合功能，帮助客户快速构建数据通道Ø帮助客户在数据处理环节上提供数据脱敏、转换、加密等基础功能Ø实现对各种类型数据的自动提取、分析和归类等进阶功能数据同步与迁移收集处理分发能力开放数据过滤数据脱敏数据加密数据转换数据分析数据核对流量控制源端保护数据识别权限控制目的端保护流量控制数据识别权限控制API方式组件式开发............91跨IDC数据同步工具：数据同步概述

1.典型管理系统架构，Manager（web+java）+Node（工作节点）a.manager运行时推送同步配置到node节点b.node节点将同步状态反馈到manager上

2.基于zookeeper进行协调调度工作，允许多Node节点之间协同工作。

3.配置信息、同步日志和监控信息保存在数据库DB中。92跨IDC数据同步工具：数据同步概述主要应用场景：异构数据迁移，增量数据同步，异地灾备系统。异构数据迁移Oracle数据库到分布式数据库。分布式数据库到oracle数据库。增量数据同步异地灾备系统实时同步功能可以实现异地IDC间的数据容灾。地区、省、集团数据共享同步。系统增量数据订阅。Oracle忌莪啐衤媵捱唣鳍衤媵)*忌莪啐衤媵捱OracleIDC_B氏IDC_A氏掣柄狨捺唣氏闲柄狨捺唣氏闲％闻衤媵六衤媵捱衤媵捱闻衤媵吼臣褓穿93跨IDC数据同步工具：数据同步的功能与特性

1.实时同步实现低延时ü并行调度、网络策略、运维管理和延迟监控保障数据同步的实时性

2.核对同步保障数据一致性ü按时间扫表的增量核对同步ü多任务并行的全量核对同步

3.支持异构数据库间同步ü支持关系型数据库（Oracle,MySQL）间的数据同步ü支持分布式数据库，库表配置可自动获取并生成

4.支持同步到分布式文件系统ü支持将数据同步至分布式文件系统，方便后续处理

5.支持故障自动切换恢复üZookeeper和Node节点集群化部署，保证高可用ü工作节点支持水平扩展

6.具备运维监控管理等配套功能ü多维度的监控指标，包括工作状态、延迟时间、同步进度、吞吐量等IDC_A氏A衤媵柄狨IDC_B氏B衤媵柄狨&IDC衤媵六蘼掾滓六瘐阖现./煜衤媵辍撩衤媵晶4B氏捺捺逐髟A氏捺捺逐髟94跨IDC数据同步工具：适配paas组件情况系统类型组件类型适配进度PaaS自研组件ctg-kafka支持ctg-Tidb支持ctg-udal支持ctg-pg支持ctg-mongodb正在支持且具备能力ctg-cache(Redis)正在支持且具备能力EADP正在支持且具备能力HANA正在支持ctg-zookeeper计划支持elasticsearch计划支持ctg-mq计划支持ctg-Hbase计划支持ctg-ctdfs计划支持同步组件支持多款paas组件之间的数据同步：•后续目标：打通云公司所有paas平台与开源组件的数据传输和数据共享问题95跨IDC数据同步工具：增量同步原理（源端mysql、udal）•增量组件的工作原理

1.canal模拟mysqlslave的交互协议，伪装自己为mysqlslave，向mysqlmaster发送dump协议

2.mysqlmaster收到dump请求，开始推送binarylog给slave(也就是canal)

3.canal解析binarylog对象(原始为byte流)•MySQL主备复制实现

1.master将改变记录到二进制日志(binarylog)中；

2.slave将master的binarylogevents拷贝到它的中继日志(relaylog)；

3.slave重做中继日志中的事件，将改变反映它自己的数据。mysqlbinlogParse辆Binlog_Dump煨binlogMasterParseSinkStore

1.#$

2.忌辆

3.噔蘼

4.晶茼StoreStoreCanal衤媵焱轰MetaManager衤媵枕搞闻&敦沐让96跨IDC数据同步工具：全量同步原理（源端Mysql、UDAL、Oracle）

1.批处理模式：对源物理表中的记录划分为多个批次，采用多线程并发技术，每个批次负责一个范围内的数据，多个批次并发地从源数据表和目标数据表拉取记录数据，每个批次进行独立的数据比对环节之后进行差异数据推送

2.流模式：对源物理表直接进行流式抽取，线程池分配入库线程以后，每个线程负责将一批数据入库到目标端图一：批处理模式图二：流模式源端数据表（物理表）目标端数据表（物理表）批次1批次2批次n批次1批次2批次n......数据拉取线程池数据比对1数据比对2数据比对n...数据推送1数据推送2数据推送n批次划分批次划分...97跨IDC数据同步工具：性能指标基于以下同步场景测试：同步一张表共20个字段，同步数据量2000万记录数

1、分布式TeleDB同步到分布式TeleDB数据库(硬件环境：CPU：E7-4820v28核16线程，内存：512G，硬盘：1T)（同步配置：源端48个分片，8通道同时入库，目标库4个数据库）

2、分布式TeleDB同步到TeledDB数据库(硬件环境：CPU：E7-4820v28核16线程，内存：512G，硬盘：1T)（同步配置：源端单通道，8个分片表，目标库1个数据库）增量同步效率

13.2万记录/秒，吞吐量：60.3MB/秒全量同步效率批处理模式：10万条记录/秒，吞吐量：

45.7MB/秒流模式：

16.6万条记录/秒，吞吐量：

75.8MB/秒增量同步效率

2.8万记录/秒,吞吐量：

13.3MB/秒全量同步效率批处理模式：

5.3万记录/秒,吞吐量：

24.2MB/秒流模式：10.3万记录/秒,吞吐量：

48.9MB/秒98跨IDC数据同步工具：性能指标基于以下同步场景测试：同步一张表共20个字段，同步数据量2000万记录数

1、分布式TeleDB同步到Oracle数据库(硬件环境：CPU：E7-4820v28核16线程，内存：512G，硬盘：1T)（同步配置：源端单通道，8个分片表，目标库1个数据库）增量同步效率

3.2万记录/秒,吞吐量：

15.2MB/秒全量同步效率批处理模式：

6.1万记录/秒,吞吐量：

28.9MB/秒流模式：

12.3万记录/秒,吞吐量：

58.4MB/秒9999目录

1.天翼云自研一城一池

2.天翼云合营一城一池

3.天翼云PaaS组件概述

4.天翼云PaaS在内外部IT上云的应用100分布式文件系统（CTDFS）：广东IT上云•元数据集群：6台•数据集群：138台•文件总数：

6.9亿•文件平均大小：

1.87MB平台规模•元数据节点：CPU2*8Core，内存192GB•数据节点：CPU2*10Core，内存192GB，磁盘容量12*6TB节点配置•计费出账用户数：约6700万•出账金额：40亿+•实时预处理话单数：约6000亿•实时批价话单数：约1000亿业务规模•新一代BSS

3.0是首个采用中国电信集团自主研发的分布式PaaS平台组件进行开发建设，并率先实现IT核心能力上云的电信业务运营支撑系统。•新一代BSS

3.0系统的全面应用，依托大数据注智，实现为客户经营赋能，为渠道管理赋能，为一线和客户体验提升赋能。•“平台+应用”的全新架构带来的不仅仅是技术上的变革，更重要的是大幅提升市场运营效率，突破业务发展瓶颈。ü新一代BSS

3.0在广东全省上线后：1/310倍>

99.99%业务处理时长缩短计费性能提升费用一致率101分布式文件系统（CTDFS）：广东IT上云文件总数：0.7亿文件平均大小：

1.64MB读流量峰值：320MB/s写流量峰值：865MB/sCPU占用均值：

2.3%内存占用均值：

29.6%佛山大区文件总数：

1.2亿文件平均大小：

3.23MB读流量峰值：200MB/s写流量峰值：

1.4GB/sCPU占用均值：

1.2%内存占用均值：

29.0%东莞大区文件总数：

2.1亿文件平均大小：

2.05MB读流量峰值：539MB/s写流量峰值：759MB/sCPU占用均值：

7.9%内存占用均值：

35.3%广州大区文件总数：

3.0亿文件平均大小：

1.91MB读流量峰值：944MB/s写流量峰值：984MB/sCPU占用均值：

1.6%内存占用均值：30.8%深圳大区CRM版本升级清单云系统升级...More102跨IDC数据同步工具：用户案例

1.中国电信集团核心IT系统上云(分布式TeleDB->分布式TeleDB、TelePG)ü全国27个省市BSS

3.0系统和计费系统，部分人口大省当日同步数据达到25亿，同步TPS达到15W。

2.中国电信物联网平台（分布式TeleDB->HDFS）ü企业客户多，单客户最大用户数超百万，每日峰值订单可达700万。ü其中订单属性表数据量达到70亿+，10张核心表总数据量达到162亿，完成7T+数据迁移到数据中心，用时不到20小时，平均TPS约为23W/S。ü增量同步平均每日同步增量数据约2亿，数据大小约70G。

3.中国电信5G云桌面(TeleDB->TeleDB)ü云桌面累计发展超170万户（34万核），同步资源池38个，日同步数据

1.8亿，同步数据量

2.5G，预计年收入超5000万。103天翼云PaaS使用场景：已在内外部客户广泛使用•私有化部署：数据库、缓存、消息、容器等产品在国资委、广州政务热线、宁德新时代、达达兔、深圳易联等行业客户落地•公有云部署：15款PaaS产品在29个天翼公有云节点加载销售行业客户内部客户-IT全面上云•目前已承载了集团总部、31省公司及专业公司1600+套IT系统MSS上云BSS上云OSS上云其他系统上云•资源池：拉通全国106个分散资源池，形成分布式PaaS一朵云•服务器：盘活利旧10000+服务器•数据库：累计开通6800+数据库实例•容器服务：超30000+容器服务实例成为全球首家核心IT系统去“IOE”的运营商使用天翼云PaaS平台构建IT系统技术底座，走向企业数字化转型之路天翼云PaaS平台，已在中国电信内外部客户广泛使用。电信内部承载用户量超8亿、支撑业务收入超2800亿104内部IT上云场景：初步建成上云技术底座，总结形成上云方法论2上云率达到43%3初步建成上云四平台+1工具43%20%

7.16年底上云数：1300+上云数：747上云率提升23%支持组件种类50+累计开通实例

1.1w+监控系统数量1000+使用合作伙伴113托管系统和代码2170/22亿+原子能力数量670+云迁省份14个Oracle库76+数据迁移成功率>99%4形成了“五步骤十流程”企业上云方法论第一步系统上云分析第二步确定上云模式第三步技术选型与设计第四步上云实施与部署第五步上云交付与运维

①上云系统清单

②上云需求与驱动力

③确定上云模式

⑥架构部署

⑦应用改造

⑧数据迁移/割接

④技术选型

⑤架构设计

⑨上云交付⑩上云运维初步建成上云四平台，实现从一户一案模式到自动化、智能化、规模化上云，降低上云难度，批量上云成为可能2020年2021年2022年6月启动全面上云推动全面上云实现全面上云40%85%100%

1、新建系统100%上云，存量系统三年上云105内部IT上云场景：业务快速交付，运营效率提升，硬件成本降低业务支撑业务运营（新一代）业务在线与开通ü销售品上架：公众A类集约销售品自动加载覆盖率95%，自动加载时长由1小时缩短至15分钟ü客户经营：营销活动

23.33万个，用户派单量24亿，接触用户16亿次，客户接触率

66.6%ü去Oracle：率先使用TelePG去Oracle62套，处理4500亿条195T数据，14省质量基本达标具备端到端业务能力ü云网能力开放：总部800+各省4000+ü5GC集中运营，跨域告警关联，日处理300万个ü线上服务项和服务量占比“双95%”ü客户临柜时长由10分钟缩短至5分钟ü全国移动业务交付及时率由3分钟提升至1分钟95%以上ü云专网开通从无到有一次性自动开通成功率达到70%，初步具备云调网能力系统运营提效率数字化办公降成本降低硬件成本30%业务成效：通过上云，推进了流程的数字化，大数据注智生产系统，生产效率大幅提升ü盘活入池主机8000台，估值

3.5亿元ü跨系统共享资源，利用率提升5-10%不等ü替换高端存储，小型机费用ü去Oracle许可、维保费用ü“办公耗材费”、“差旅会议费”预计同比压降40%-50%ü档案管理年节约纸张、耗材、场地等费用

1.4亿元üPaaS组件：应用自助申请，由专家3-5天人工安装到分钟级开通ü全网故障时长与次数：双90%下降ü上云系统：问题分钟级发现、分钟级故障定位106客户IT上云路径：主要分为L

1、L

2、L3三个级别L1L2L3去IE上天翼混合云降本增效去IOE快速实现商用数据库替换上天翼混合云、降本增效云化改造在L2基础上使用四平台，实现灵活支撑，敏捷迭代ØIaaS：优先上天翼云ØIT系统：不做改造，直接迁上云路径参考电信内部IT上云，将客户IT上云分为以下三个级别ØIaaS：优先上天翼云ØIT系统：去O，采用云数据库改造ØIaaS：优先上天翼云ØIT系统：去O，采用PaaS组件改造，最高实现云原生客户IT上云三个级别107客户IT上云场景1：客户对上云有兴趣但不知如何开始，切入用户上云咨询和顶层设计通过电信上云五步骤十流程、上云标准、上云策略和上云平台等云改支撑能力，帮助用户进行IT系统上云咨询和顶层设计，引导客户系统快速上云，早上云早受益客户的需求和痛点Ø客户有几十个IT系统，想上云但不知道从哪入手，路径是什么时Ø客户的业务系统需要重构或新建时Ø客户已经使用电信云资源，想数字化转型时Ø客户在做智慧类工程规划，需要开展技术规范、标书时目标客户与案例Ø政府、交通、教育等智慧类工程Ø大型央/国企IT规划上云等Ø中国重汽上云咨询规划Ø山东潍柴动力企业上云咨询Ø中海油统一PaaS规划咨询项目要点方案Ø云化战略咨询：结合电信自身多年上云经验，涉及“上云标准”、“上云策略”、“上云五步骤十流程方法”等，为企业提供务实的上云战略咨询，解决企业上云疑难问题Ø云改调研与规划：可为企业客户提供上云技术架构选型、上云演进路径、云改策略与方法论、制定上云规范Ø助力企业中台能力建设：以中国电信上云、中台技术能力为基础，为客户提供业务中台、数据中台能力技术支撑108客户IT上云场景2：客户核心系统需要去O时，使用自研TeleDB和TelePG组件或PaaS平台通过使用中国电信自研TeleDB和TelePG组件或PaaS平台，帮助客户实现去掉Oracle等商用数据库场景，实现IT系统的自主可控，降本增效客户的需求和痛点ØIOE投入成本高：小型机、Oracle、EMC存储设备采购成本、维护成本居高不下Ø业务系统受投资影响，IOE资源补充难Ø信息安全存在威胁：过渡依赖国外厂商IT技术，易受国际局势变化影响目标客户与案例Ø大型央/国企等Ø中国电信集团、省分电信核心系统、外围系统Ø卫健委云上医院Ø宁德时代SDP数据库改造上云要点方案Ø使用廉价X86+廉价存储结合的“去IOE”模式，相比商业软件降低投入Ø垂直划分+水平散列的分片，支持海量数据存储Ø基于多数数据分片算法进行分库分表，横向扩展，突破存储与性能瓶颈Ø以分布式数据库的弹性扩缩能力，应对峰值流量109客户IT上云场景3：客户IT系统使用开源组件遇到问题时，提供PaaS服务，引导使用PaaS平台客户单IT系统使用了开源组件但遇到使用和维护问题时，通过提供使用中国电信组件和PaaS平台帮助客户解决维护难、使用难等问题客户的需求和痛点n开发运维成本高Ø应用的全部功能捆绑在一起，不利于维护和扩展，服务负载能力有限。代码耦合，开发维护困难，无法针对不同模块进行针对性优化。Ø数据库软件售价高Ø数据库依托于高端硬件，CAPEX和OPEX成本高昂n性能瓶颈Ø数据库数据节点少，无法负载分担，并发能力不足n可扩展性差Ø应用无法水平扩展，单点容错率低，并发能力差Ø存储容量的提供只能依靠提升自身设备的性能（增加CPU/内存/磁盘）n可靠性差Ø无法实现多数据节点备份，易开成单点故障目标客户与案例Ø中国电信物联网IT支撑系统，天翼云网门户等3000多套IT系统Ø吉林／广州／东莞／中山等省市政务执行Ø菲律宾PTO要点方案n应用层•横向分中心微服务化，高速数据缓存，容器化部署•提供统一API开发引擎，对外提供亿级高频访问能力•高并发接口、分布式消息高性能异步处理、应用解耦n数据层•高性能：多分片节点，集群部署，解决IO瓶颈，多节点负载•低成本：国产的PC服务器即可实现高性能分布式数据库部署•高可靠性：主备毫秒级数据同步，多数据节点，集群部署；主备秒级切换•高可扩展性：增添存储节点实现容量的线性扩展，平滑扩容110客户IT上云场景4：客户IT系统使用公有云、私有云等多云，切入上云通过统一PaaS平台的多云适配能力，为企业IT上云提供公有云、私有云等多云统一资源管理、统一运维管理和统一服务管理，实现简化管理流程，为客户提供一致的体验客户的需求和痛点Ø拥有多公有云、多私有云、容器云、SDN等多云资源，缺少统一管理工具，多资源管理平台，管理分散，运维效率低下Ø在资源申请与管理需要在多平台切换操作，使用跨平台操作复杂Ø资源申请线下流程复杂，审批流程长，资源开通周期长Ø企业组织架构分层级划分复杂，用户权限不一Ø各厂家云网资源产品、规格、价格不一，缺乏统一管理手段Ø企业资源使用成本缺少统计考核手段Ø各厂家资源池监控告警能力不一，缺少智慧化运维手段，故障定位难目标客户与案例Ø中国民生银行混合云Ø北京大兴国际机场云Ø浙江政务云Ø邮政“绿盾”云要点方案多云融合技术解耦整合主流私有云、公有云、混合云统一呈现，不被单一厂家做技术绑定服务统一跨云交付定义统一的云产品服务目录，一键申购混合多云资源，自动化交付资源监控自动运维提供统一的多云运维工具，实时监控和维护客户分散在全国各地的资源池趋势预测智慧运营多云资源统一监控，各部门用户云量、成本及趋势分析，为资源池规划提供科学输入111天翼云PaaS使用场景案例：客户IT上云技术支撑•提供上云需求场景适配研发，支撑客户上云商机落地•提供产品选型、技术迁移等售前技术方案支持•提供项目招投标技术支持售前•提供认证、培训、云上学堂等，赋能销售单元•提供部署设计、应用架构设计、性能调优设计等专家服务•提供项目实施过程中的技术服务支持售中•7*24小时二线运维保障服务•紧急救援、健康诊断、性能调优、数据恢复、应用升级、安全等技术服务售后售中售前售后云公司提供售前、售中、售后全流程支撑服务112客户IT上云中的应用：安徽财政厅预算一体化系统上云项目痛点系统开发厂商缺乏大型集中系统的实施经验，从88套系统到1套系统，能否正常支撑全省10万用户的正常使用？需求架构：基于电信PaaS平台部署应用系统，提升系统稳定性、性能和运行监控能力实施：电信安排DBA协助应用开发商进行上线前的性能测试和优化，保障成功割接上线咨询：电信安排IT咨询人员协助财政厅完善项目方案，提升方案的技术先进性安徽公司首单落地IT上云四平台（其中三平台），以云道+ccse容器切入，拉动iaas/paas一体化年租费600余万元价值分析对外：打造标杆，形成突破对内：整合能力，强化协同服务网关数据层应用层交互层Web应用App应用WeblogicTomcatOracleOracleHAIaaSPaaS...云道云眼容器管理平台开源组件分布式数据库业务逻辑支付核算预算总账微服务网关Zuul应用门户应用门户移动APP上云能力中心云翼上云后由基于IOE技术架构升级为基于PaaS组件的五层分布式技术架构IaaS政务云政务云113客户IT上云中的应用：广州12345政府热线12345政府服务热线业务系统，基于中国电信云平台建设和实施部署，集成了电信云开发平台的分布式开发门户、分布式数据库、高可用数据库、容器服务等产品，极大的提升了产品研发效率，缩短了项目实施周期，增强了产品性能及稳定性。提高投入产出比智能运维高可靠/弹性扩展11个区170个街（镇）2800个行政村居78条热线51个职能部门135个企事业单位800个坐席并发年1100万话务量具备自主知识产权的PaaS组件能力平台，集合了分布式数据库、分布式消息队列、分布式缓存、分布式容器、DevOps等核心组件能力。达到了平台高性能、高可用及稳定性等。同时基于平台组件能力，通过“平台+应用”的开放式研发体系，实现应用快速构建，帮助企业应用快速上云。基于平台产品智能化运维工具，整体上有效推动了热线产品体系的升级，为热线产品综合服务能力的提升提供了强有力的支撑。项目实施部署完全“去IOE”，平台能力高度复用，开发周期缩短，开发质量提升，开发成本将明显下降,据根据广州12345项目测算，硬件、系统软件和维保费用下降40%以上。国际奖项（全国唯一）p2018年亚太区最佳呼叫中心(大型)银奖p2019年亚太区最佳公共服务金奖国内奖项p2018年获得“广东省十大创新软件”p2019年度中国最佳政府服务热线p2017~2019年连续两年获得第三方平台服务质量测评综合排名全国第一114客户IT上云中的应用：宁德时代SDP数据库改造上云客户名称：宁德时代新能源（CATL）上云类型：数据库改造案例概况：使用分布式数据库替换单节点数据库，提升数据库性能与可扩展性。建设模式：调研+自主实施主要工作内容：SDP系统为新能源电池售后一体化数据中心系统，数据量大、实时查询要求高；系统采用单体开源Mysql数据库存在无法满足海量数据及性能要求；采用HANA商业数据库则造成巨额成本支出。解决方案：采用电信集团自研分布式数据库解决方案，利用自研分布式数据库横向扩展能力，以达到海量数据存储、读写性能高的要求。•单体MySQL替换为分布式数据库Ø分布式数据库与天翼云解决方案，形成示范效应，有效拉动天翼云销售ØSDP售后系统涉及分布式数据库改造，数据存储容量为115TB，天翼云专属资源池约为30台设备（其中包括物理存储区、数据分析区、应用区等），改造期为

1.5个月，其中平台投入专家4名，应用改造投入2名案例价值案例成果业务挑战解决方案MySQLSDPUDALSDPTELEDB1TELEDB

2...115客户IT上云中的应用：省市政务云PaaS部署规划省政务云-政务外网公共VPC云翼控制台云道云眼云桥-DCOOS厅局VPCPaaS组件实例云眼前置采集机云桥-EOP市政务云-政务外网公共VPC云翼控制台厅局VPCPaaS组件实例云眼前置采集机云桥-EOP省政务云-互联网区市政务云-互联网区厅局VPCPaaS组件实例云眼前置采集机云桥-EOP厅局VPCPaaS组件实例云眼前置采集机云桥-EOP部署原则非生产直接相关平台尽可能省集中部署，减少部署及后期版本升级、日常运维的工作量生产直接相关的平台本地化部署，实现不同客户生产环境的彻底隔离网络连通按最小化控制，降低安全风险云翼（6台8C32G虚机）云翼控制台省市两级部署，各部署一套PaaS组件实例在省市各个厅局VPC云眼（10台8C16G虚机）省市两级部署前置采集机部署在各厅局VPC云道（25台虚机）暂省集中部署。（部署和升级比较复杂，后续根据具体项目需求）云桥（24台虚机）暂无落地案例，后续根据项目需求云眼

